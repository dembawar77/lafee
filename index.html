<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pour Eliane, ma f√©e üßöüèæ‚Äç‚ôÄÔ∏è‚ù§Ô∏è</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>

    <style>
        /* --- DESIGN : ROSE & ROUGE --- */
        body {
            font-family: 'Nunito', sans-serif;
            background: radial-gradient(circle at center, #fff0f5 0%, #fda4af 100%);
            overflow: hidden;
            touch-action: pan-y;
            user-select: none;
        }

        .handwritten { font-family: 'Dancing Script', cursive; }

        /* √âCRAN DE CHARGEMENT */
        #preloader {
            position: fixed; inset: 0; background: #fff0f5; z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.5s ease;
        }

        /* LE PLATEAU */
        #board {
            width: 100%; height: 100%; position: relative; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* STYLE POLAROID */
        .card {
            width: 300px; /* Largeur id√©ale mobile */
            height: 480px;
            background: white;
            border-radius: 6px;
            position: absolute;
            box-shadow: 0 10px 30px rgba(190, 18, 60, 0.2);
            display: flex; flex-direction: column; 
            padding: 15px 15px 60px 15px; 
            cursor: grab;
            transition: transform 0.1s;
            border: 1px solid #fce7f3;
        }

        .card-image-container {
            width: 100%; height: 100%; 
            background: #fce7f3; 
            overflow: hidden;
            position: relative;
        }

        .card-img {
            width: 100%; height: 100%; object-fit: cover; pointer-events: none;
        }

        /* Texte manuscrit */
        .card-caption {
            position: absolute; bottom: 10px; left: 0; width: 100%;
            text-align: center;
            color: #be123c;
            font-size: 1.8rem; 
            transform: rotate(-2deg);
        }

        /* CARTE FINALE */
        .card.final {
            background: linear-gradient(135deg, #fff 0%, #fff0f5 100%);
            border: 4px solid #fda4af;
            justify-content: center; align-items: center; padding: 20px;
            cursor: default;
        }

        /* BOUTON MUSIQUE */
        #music-btn {
            position: fixed; top: 20px; right: 20px; z-index: 50;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%; width: 45px; height: 45px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            cursor: pointer; border: 1px solid #fda4af;
        }

        .heartbeat { animation: beat 1.5s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
    </style>
</head>
<body>

    <div id="preloader">
        <div class="text-6xl text-rose-500 heartbeat mb-4">‚ù§Ô∏è</div>
        <div class="text-rose-400 font-bold text-sm tracking-widest uppercase">Chargement de nos souvenirs...</div>
    </div>

    <div id="music-btn" onclick="toggleMusic()">
        <span id="music-icon" class="text-xl">üîá</span>
    </div>
    <audio id="bg-music" loop>
        <source src="https://assets.mixkit.co/active_storage/sfx/2578/2578-preview.m4a" type="audio/mpeg">
    </audio>

    <div id="board">
        </div>

    <div class="fixed bottom-6 w-full text-center pointer-events-none z-0">
        <p class="text-rose-600 opacity-80 font-bold text-xs animate-bounce">Glisse les photos ‚ÜîÔ∏è</p>
    </div>

    <script>
        // =================================================================
        // CONFIGURATION : TES 10 PHOTOS
        // =================================================================
        
        // Remplace les liens par les tiens (ImgBB, etc.)
        // L'ordre d'affichage est : 1 (Celle du dessus) -> 10 (La derni√®re)
        
        const photos = [
            { img: "https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?w=600", text: "Le d√©but de tout..." },
            { img: "https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?w=600", text: "Ce jour l√† ‚ù§Ô∏è" },
            { img: "https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=600", text: "Ton sourire..." },
            { img: "https://images.unsplash.com/photo-1621600411688-4be93cd68504?w=600", text: "S√©n√©gal vibes üá∏üá≥" },
            { img: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=600", text: "Nos d√©lires üòÇ" },
            { img: "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=600", text: "Toi si belle ‚ú®" },
            { img: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=600", text: "Complices" },
            { img: "https://images.unsplash.com/photo-1517841905240-472988babdf9?w=600", text: "Ma force" },
            { img: "https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600", text: "Indispensable" },
            { img: "https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=600", text: "Pr√™te ? ‚ù§Ô∏è" },
        ];

        const myPhoneNumber = "221777305494"; // Ton num√©ro

        // =================================================================
        // MOTEUR DU SITE
        // =================================================================
        
        const board = document.getElementById('board');
        const preloader = document.getElementById('preloader');
        let loadedCount = 0;

        // Fonction de chargement
        function checkLoaded() {
            loadedCount++;
            if (loadedCount >= photos.length) {
                setTimeout(() => {
                    preloader.style.opacity = '0';
                    setTimeout(() => preloader.style.display = 'none', 500);
                }, 1000);
            }
        }

        // 1. CARTE FINALE (Fond de la pile)
        const finalCard = document.createElement('div');
        finalCard.className = 'card final';
        finalCard.innerHTML = `
            <div class="text-7xl mb-6 heartbeat">üíç</div>
            <h1 class="handwritten text-4xl text-rose-600 mb-4 text-center">Bonne Saint-Valentin</h1>
            <p class="text-rose-500 text-lg text-center mb-8 px-4 leading-relaxed">
                Eliane, mon amour, <br>veux-tu √™tre ma Valentine ?
            </p>
            <a href="https://wa.me/${myPhoneNumber}?text=${encodeURIComponent("OUI mon c≈ìur ! Je veux √™tre ta Valentine ! üíñü•∞")}" 
               class="bg-rose-500 text-white px-8 py-4 rounded-full font-bold shadow-lg transform transition active:scale-95 hover:bg-rose-600 flex items-center gap-2">
               <span>üíå Envoyer OUI</span>
            </a>
        `;
        board.appendChild(finalCard);

        // 2. LES PHOTOS (Empil√©es par dessus)
        for (let i = photos.length - 1; i >= 0; i--) {
            const data = photos[i];
            const card = document.createElement('div');
            card.className = 'card';
            
            // Rotation al√©atoire
            const rotation = (Math.random() - 0.5) * 8; 
            card.style.transform = `rotate(${rotation}deg)`;
            card.dataset.rotation = rotation;

            card.innerHTML = `
                <div class="card-image-container">
                    <img src="${data.img}" class="card-img" onload="checkLoaded()" onerror="checkLoaded()">
                </div>
                <div class="handwritten card-caption">${data.text}</div>
            `;
            
            board.appendChild(card);
            initHammer(card);
        }

        // Fallback si 0 photos
        if (photos.length === 0) checkLoaded();

        // 3. Gestion Swipe (Hammer.js)
        function initHammer(card) {
            const hammer = new Hammer(card);
            
            hammer.on("pan", (e) => {
                card.style.transition = "none";
                const rotation = parseFloat(card.dataset.rotation) + (e.deltaX / 20);
                card.style.transform = `translate(${e.deltaX}px, ${e.deltaY}px) rotate(${rotation}deg)`;
            });

            hammer.on("panend", (e) => {
                card.style.transition = "transform 0.4s ease-out";
                const keep = Math.abs(e.deltaX) < 100 && Math.abs(e.velocityX) < 0.5;

                if (!keep) {
                    // Ejection
                    const endX = Math.max(Math.abs(e.velocityX) * window.innerWidth, window.innerWidth);
                    const toX = e.deltaX > 0 ? endX : -endX;
                    const endY = Math.abs(e.velocityY) * window.innerHeight;
                    const toY = e.deltaY > 0 ? endY : -endY;
                    
                    card.style.transform = `translate(${toX}px, ${toY + e.deltaY}px) rotate(${e.deltaX/10}deg)`;
                    
                    setTimeout(() => { card.remove(); }, 300);

                    // Confettis si fin
                    if (document.querySelectorAll('.card:not(.final)').length <= 1) {
                         setTimeout(launchConfetti, 500);
                    }
                } else {
                    // Retour
                    card.style.transform = `translate(0, 0) rotate(${card.dataset.rotation}deg)`;
                }
            });
        }

        // 4. Musique
        const audio = document.getElementById('bg-music');
        const musicIcon = document.getElementById('music-icon');
        let isPlaying = false;

        function toggleMusic() {
            if (isPlaying) {
                audio.pause();
                musicIcon.innerText = "üîá";
            } else {
                audio.play().catch(e => console.log("Audio bloqu√©"));
                musicIcon.innerText = "üéµ";
            }
            isPlaying = !isPlaying;
        }

        // 5. Confettis
        function launchConfetti() {
            const duration = 3000;
            const end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#be123c', '#fda4af'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#be123c', '#fda4af'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
    </script>
</body>
</html>
