<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pour Eliane, ma f√©e üßöüèæ‚Äç‚ôÄÔ∏è‚ù§Ô∏è</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background: radial-gradient(circle at center, #fff0f5 0%, #fda4af 100%);
            overflow: hidden;
            touch-action: manipulation;
            user-select: none;
        }

        .handwritten { font-family: 'Dancing Script', cursive; }

        /* PRELOADER */
        #preloader {
            position: fixed; inset: 0; background: #fff0f5; z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.8s ease;
        }

        #card-stack {
            position: relative;
            width: 320px;
            height: 480px;
            margin: 0 auto;
            perspective: 1000px;
            display: flex; justify-content: center; align-items: center;
        }

        .card {
            position: absolute;
            width: 100%; height: 100%;
            background: white;
            padding: 15px 15px 60px 15px;
            border-radius: 8px;
            box-shadow: 0 10px 20px rgba(190, 18, 60, 0.15);
            transform-origin: 50% 100%;
            transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.5s;
            cursor: pointer;
            display: flex; flex-direction: column; align-items: center;
            border: 1px solid #fff1f2;
        }

        .card-img {
            width: 100%; height: 100%; object-fit: cover;
            border-radius: 4px; pointer-events: none;
            background-color: #fce7f3;
        }

        .card-caption {
            position: absolute; bottom: 15px; width: 100%; text-align: center;
            font-size: 1.8rem; color: #be123c; transform: rotate(-2deg);
        }

        .final-card {
            background: linear-gradient(135deg, #fff 0%, #fff0f5 100%);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 30px; text-align: center; border: 4px solid #fecdd3;
        }

        /* Animations Gauche / Droite */
        .fly-away-right { transform: translate(100vw, -20vh) rotate(45deg) !important; opacity: 0; }
        .fly-away-left { transform: translate(-100vw, -20vh) rotate(-45deg) !important; opacity: 0; }

        .hint { animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }
        .heartbeat { animation: beat 1.5s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
    </style>
</head>
<body class="h-screen w-screen flex flex-col items-center justify-center">

    <div id="preloader">
        <div class="text-6xl text-rose-500 heartbeat mb-4">üíñ</div>
        <p class="text-rose-400 font-bold uppercase tracking-widest text-xs text-center px-4">
            Patience mon c≈ìur...<br>Je pr√©pare une surprise
        </p>
    </div>

    <div class="absolute top-10 text-rose-600 opacity-80 font-bold tracking-widest text-sm uppercase z-0">
       Pour Elianeüßöüèæ‚Äç‚ôÄÔ∏è‚ù§Ô∏èüåü
    </div>

    <div id="card-stack" class="z-10"></div>

    <div id="instructions" class="absolute bottom-10 text-rose-500 font-bold text-lg hint pointer-events-none z-0">
        Babe clique pour faire d√©filer !
    </div>

    <audio id="bg-music" loop>
        <source src="https://assets.mixkit.co/active_storage/sfx/2578/2578-preview.m4a" type="audio/mpeg">
    </audio>

    <script>
        // --- 1. CONFIGURATION ---
        // L'ordre d'affichage : LA DERNI√àRE photo de la liste (photo10) est celle du DESSUS.
        // C'est celle qu'elle verra en premier.
        
        const memories = [
            // --- LA CARTE DE FIN (SOUS LE PAQUET) ---
            { 
                type: 'final',
                text: "Bonne Saint-Valentin ‚ù§Ô∏è",
                subtext: "Look into my eyes You will see What you mean to me. Look into your heart You will find me üíû"
            },
            
            // --- TES 10 PHOTOS (Remplace par tes fichiers photo1.jpeg etc.) ---
            { img: "https://i.ibb.co/BKNx8tzZ/photo10.jpg?w=600", text: "Allez bise ciao‚ù§Ô∏è" },
            { img: "https://i.ibb.co/wZhX1QPd/photo2.jpg?w=600", text: "Ce jour l√† ü§ß" },
            { img: "https://i.ibb.co/DDW6FmTP/photo1.jpg?w=600", text: "Baddiiie Pro Maxü•µ" },
            { img: "https://i.ibb.co/3yP1HKtj/photo8.jpg?w=600", text: "Ndiongu√© üòÇ" },
            { img: "https://i.ibb.co/1ty0M6Bt/photo7.jpg?w=600", text: "Baddiiie Proü•µ" },
            { img: "https://i.ibb.co/TqDw0dGc/photo6.jpg?w=600", text: "Sugar Mamy üòÇ‚ú®" },
            { img: "https://i.ibb.co/Z6nbwG19/photo5.jpg?w=600", text: "Baddiiie ü•µ" },
            { img: "https://i.ibb.co/YBRm5fz0/photo4.jpg?w=600", text: "Ma force" },
            { img: "https://i.ibb.co/PvXP10yK/photo9.jpg?w=600", text: "Indispensable ‚ù§Ô∏è" },
            
            // --- LA PREMI√àRE VISIBLE (DESSUS DU PAQUET) ---
            { img: "https://i.ibb.co/V0wYKs9F/photo3.jpg?w=600", text: "Ma f√©e √† moi" }
        ];

        // --- 2. MOTEUR DU SITE ---

        const stackContainer = document.getElementById('card-stack');
        const instructions = document.getElementById('instructions');
        const preloader = document.getElementById('preloader');
        
        let loadedCount = 0;
        let throwCount = 0; // Pour alterner gauche/droite

        function hidePreloader() {
            preloader.style.opacity = '0';
            setTimeout(() => preloader.style.display = 'none', 800);
        }

        // Chargement des images
        function checkLoaded() {
            loadedCount++;
            if (loadedCount >= memories.length - 1) {
                hidePreloader();
            }
        }
        // S√©curit√© temps max
        setTimeout(hidePreloader, 3500);

        function init() {
            stackContainer.innerHTML = '';
            
            memories.forEach((memory, index) => {
                const card = document.createElement('div');
                const randomRotation = (Math.random() - 0.5) * 10; 
                
                if (memory.type === 'final') {
                    card.className = 'card final-card';
                    card.innerHTML = `
                        <div class="text-6xl mb-4 heartbeat">üíñ</div>
                        <h1 class="handwritten text-5xl text-rose-600 mb-4">${memory.text}</h1>
                        <p class="text-rose-400 font-bold text-xl">${memory.subtext}</p>
                    `;
                } else {
                    card.className = 'card';
                    card.innerHTML = `
                        <img src="${memory.img}" class="card-img" draggable="false" onload="checkLoaded()" onerror="checkLoaded()">
                        <div class="handwritten card-caption">${memory.text}</div>
                    `;
                }

                card.style.zIndex = index;
                card.style.transform = `rotate(${randomRotation}deg)`;
                
                // Clic pour jeter la carte
                card.addEventListener('click', () => throwCard(card));
                
                stackContainer.appendChild(card);
            });
        }

        function throwCard(card) {
            // Activer la musique au premier clic
            const audio = document.getElementById('bg-music');
            if (audio.paused) audio.play().catch(() => {});

            // On ne peut jeter que la carte du DESSUS (la derni√®re dans le HTML)
            if (card !== stackContainer.lastElementChild) return;

            // Si c'est la carte finale, on lance juste des confettis en plus
            if (card.classList.contains('final-card')) {
                launchConfetti();
                return; 
            }

            // Alternance Gauche / Droite
            // Pair = Droite, Impair = Gauche
            const direction = throwCount % 2 === 0 ? 'fly-away-right' : 'fly-away-left';
            throwCount++;

            card.classList.add(direction);
            
            // Suppression apr√®s l'animation
            setTimeout(() => { 
                card.remove(); 
                
                // V√âRIFICATION : Est-ce qu'il ne reste que la carte finale ?
                // Si oui, on lance les confettis MAINTENANT !
                const remainingCards = stackContainer.querySelectorAll('.card');
                if (remainingCards.length === 1 && remainingCards[0].classList.contains('final-card')) {
                    launchConfetti();
                    instructions.innerText = "Je t'aime ‚ù§Ô∏è";
                }

            }, 500);

            // Cacher les instructions d√®s le premier clic
            instructions.style.opacity = '0';
        }

        function launchConfetti() {
            const duration = 3000;
            const end = Date.now() + duration;

            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#be123c', '#fda4af', '#fff'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#be123c', '#fda4af', '#fff'] });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        init();
    </script>
</body>
</html>
