<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pour Eliane ‚ù§Ô∏è</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>

    <style>
        /* --- DESIGN : ROSE & ROUGE --- */
        body {
            font-family: 'Nunito', sans-serif;
            /* D√©grad√© radial doux : Centre Rose p√¢le -> Bords un peu plus soutenus */
            background: radial-gradient(circle at center, #fff0f5 0%, #ffe4e6 100%);
            overflow: hidden;
            touch-action: pan-y; /* Emp√™che le scroll, active le swipe */
            user-select: none;
        }

        .handwritten { font-family: 'Dancing Script', cursive; }

        /* √âCRAN DE CHARGEMENT */
        #preloader {
            position: fixed; inset: 0; background: #fff0f5; z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.5s ease;
        }

        /* LE PLATEAU (La table o√π sont pos√©es les photos) */
        #board {
            width: 100%; height: 100%; position: relative; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* STYLE POLAROID */
        .card {
            width: 300px; /* Largeur id√©ale mobile */
            height: 480px;
            background: white;
            border-radius: 4px; /* Coins peu arrondis comme un vrai papier photo */
            position: absolute;
            box-shadow: 0 10px 30px rgba(190, 18, 60, 0.2); /* Ombre port√©e */
            display: flex; flex-direction: column; 
            padding: 15px 15px 60px 15px; /* Espace blanc en bas pour le texte */
            cursor: grab;
            transition: transform 0.1s; /* R√©activit√© imm√©diate au doigt */
            border: 1px solid #fce7f3;
        }

        .card-image-container {
            width: 100%; height: 100%; 
            background: #fce7f3; /* Fond gris/rose si l'image charge pas */
            overflow: hidden;
        }

        .card-img {
            width: 100%; height: 100%; object-fit: cover; pointer-events: none;
        }

        /* LE TEXTE MANUSCRIT EN BAS */
        .card-text {
            position: absolute; bottom: 10px; left: 0; width: 100%;
            text-align: center;
            color: #be123c; /* Rouge Rubis */
            font-size: 1.8rem; 
            transform: rotate(-2deg); /* Effet "√©crit √† la main" */
        }

        /* LA CARTE DE FIN (DEMANDE) */
        .card.final {
            background: linear-gradient(135deg, #fff 0%, #fff0f5 100%);
            border: 4px solid #fda4af;
            justify-content: center; align-items: center; padding: 20px;
            cursor: default; /* Celle-l√† ne bouge pas */
        }

        /* BOUTON MUSIQUE */
        #music-btn {
            position: fixed; top: 20px; right: 20px; z-index: 50;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%; width: 45px; height: 45px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            cursor: pointer; border: 1px solid #fda4af;
        }

        .heartbeat { animation: beat 1.5s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
    </style>
</head>
<body>

    <div id="preloader">
        <div class="text-6xl text-rose-500 heartbeat mb-4">‚ù§Ô∏è</div>
        <div class="text-rose-400 font-bold text-sm tracking-widest uppercase">Chargement de nos souvenirs...</div>
    </div>

    <div id="music-btn" onclick="toggleMusic()">
        <span id="music-icon" class="text-xl">üîá</span>
    </div>
    <audio id="bg-music" loop>
        <source src="https://assets.mixkit.co/active_storage/sfx/2578/2578-preview.m4a" type="audio/mpeg">
    </audio>

    <div id="board">
        </div>

    <div class="fixed bottom-6 w-full text-center pointer-events-none z-0">
        <p class="text-rose-400 opacity-60 font-bold text-xs animate-bounce">Glisse les photos ‚ÜîÔ∏è</p>
    </div>

    <script>
        // --- CONFIGURATION ---
        
        // TES 10 PHOTOS (Nomm√©es photo1.jpeg √† photo10.jpeg)
        // ATTENTION : J'ai mis ".jpeg" ici pour correspondre √† ton GitHub !
        const photos = [
            { img: "photo1.jpeg", text: "Le d√©but de tout..." },
            { img: "photo2.jpg", text: "Ce jour l√† ‚ù§Ô∏è" },
            { img: "photo3.jpeg", text: "Ton sourire..." },
            { img: "photo4.jpeg", text: "S√©n√©gal vibes üá∏üá≥" },
            { img: "photo5.jpeg", text: "Nos d√©lires üòÇ" },
            { img: "photo6.jpeg", text: "Toi si belle ‚ú®" },
            { img: "photo7.jpeg", text: "Complices" },
            { img: "photo8.jpeg", text: "Ma force" },
            { img: "photo9.jpg", text: "Indispensable" },
            { img: "photo10.jpeg", text: "Pr√™te ? ‚ù§Ô∏è" },
        ];

        const myPhoneNumber = "221777305494"; // Ton num√©ro WhatsApp

        // --- MOTEUR (NE PAS TOUCHER) ---
        const board = document.getElementById('board');
        const preloader = document.getElementById('preloader');
        let loadedCount = 0;

        // V√©rifie si les images sont charg√©es
        function checkLoaded() {
            loadedCount++;
            // D√®s qu'on a charg√© toutes les images, on cache le chargement
            if (loadedCount >= photos.length) {
                setTimeout(() => {
                    preloader.style.opacity = '0';
                    setTimeout(() => preloader.style.display = 'none', 500);
                }, 800);
            }
        }

        // 1. Cr√©ation de la Carte Finale (Celle tout au fond)
        const finalCard = document.createElement('div');
        finalCard.className = 'card final';
        finalCard.innerHTML = `
            <div class="text-7xl mb-6 heartbeat">üíç</div>
            <h1 class="handwritten text-4xl text-rose-600 mb-4 text-center">Bonne Saint-Valentin</h1>
            <p class="text-rose-500 text-lg text-center mb-8 px-4 leading-relaxed">
                Eliane, mon amour, <br>veux-tu √™tre ma Valentine ?
            </p>
            <a href="https://wa.me/${myPhoneNumber}?text=${encodeURIComponent("OUI mon c≈ìur ! Je veux √™tre ta Valentine ! üíñü•∞")}" 
               class="bg-rose-500 text-white px-8 py-4 rounded-full font-bold shadow-lg transform transition active:scale-95 hover:bg-rose-600 flex items-center gap-2">
               <span>üíå Envoyer OUI</span>
            </a>
        `;
        board.appendChild(finalCard);

        // 2. Cr√©ation des Polaroids (Empil√©s par dessus)
        for (let i = photos.length - 1; i >= 0; i--) {
            const data = photos[i];
            const card = document.createElement('div');
            card.className = 'card';
            
            // Rotation al√©atoire
            const rotation = (Math.random() - 0.5) * 8; 
            card.style.transform = `rotate(${rotation}deg)`;
            card.dataset.rotation = rotation;

            // Structure HTML du Polaroid
            card.innerHTML = `
                <div class="card-image-container">
                    <img src="${data.img}" class="card-img" onload="checkLoaded()" onerror="checkLoaded()">
                </div>
                <div class="handwritten card-text">${data.text}</div>
            `;
            
            board.appendChild(card);
            
            // On active le Swipe sur cette carte
            initHammer(card);
        }

        // S√©curit√© si 0 photos
        if (photos.length === 0) checkLoaded();

        // 3. Gestion du Swipe (Hammer.js)
        function initHammer(card) {
            const hammer = new Hammer(card);
            
            hammer.on("pan", (e) => {
                card.style.transition = "none";
                const rotation = parseFloat(card.dataset.rotation) + (e.deltaX / 20);
                card.style.transform = `translate(${e.deltaX}px, ${e.deltaY}px) rotate(${rotation}deg)`;
            });

            hammer.on("panend", (e) => {
                card.style.transition = "transform 0.4s ease-out";
                const keep = Math.abs(e.deltaX) < 100 && Math.abs(e.velocityX) < 0.5;

                if (!keep) {
                    const endX = Math.max(Math.abs(e.velocityX) * window.innerWidth, window.innerWidth);
                    const toX = e.deltaX > 0 ? endX : -endX;
                    const endY = Math.abs(e.velocityY) * window.innerHeight;
                    const toY = e.deltaY > 0 ? endY : -endY;
                    
                    card.style.transform = `translate(${toX}px, ${toY + e.deltaY}px) rotate(${e.deltaX/10}deg)`;
                    
                    setTimeout(() => { card.remove(); }, 300);

                    // Confettis √† la fin
                    if (document.querySelectorAll('.card:not(.final)').length <= 1) {
                         setTimeout(launchConfetti, 500);
                    }
                } else {
                    card.style.transform = `translate(0, 0) rotate(${card.dataset.rotation}deg)`;
                }
            });
        }

        // 4. Musique
        const audio = document.getElementById('bg-music');
        const musicIcon = document.getElementById('music-icon');
        let isPlaying = false;

        function toggleMusic() {
            if (isPlaying) {
                audio.pause();
                musicIcon.innerText = "üîá";
            } else {
                audio.play().catch(e => console.log("Audio autoplay bloqu√©"));
                musicIcon.innerText = "üéµ";
            }
            isPlaying = !isPlaying;
        }

        // 5. Confettis
        function launchConfetti() {
            const duration = 3000;
            const end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#be123c', '#fda4af'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#be123c', '#fda4af'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
    </script>
</body>
</html>
